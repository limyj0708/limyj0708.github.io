<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="limyj0708">
<meta name="dcterms.date" content="2025-10-08">

<title>Cloud Compute Instance 사용 시 알아두면 좋은 사용법들 – Lim’s Code Archive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Lim’s Code Archive</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/limyj0708"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/%EC%98%81%EC%A7%84-%EC%9E%84-b499a0111/?utm_source=share&amp;utm_campaign=share_via&amp;utm_content=profile"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#oracle-compute-instance에-고정-ip-할당하기" id="toc-oracle-compute-instance에-고정-ip-할당하기" class="nav-link active" data-scroll-target="#oracle-compute-instance에-고정-ip-할당하기">1. Oracle Compute Instance에 고정 IP 할당하기</a></li>
  <li><a href="#sshconfig에서-간단-접속-설정" id="toc-sshconfig에서-간단-접속-설정" class="nav-link" data-scroll-target="#sshconfig에서-간단-접속-설정">2. ~.ssh/config에서 간단 접속 설정</a></li>
  <li><a href="#oracle-compute-instance-포트-오픈" id="toc-oracle-compute-instance-포트-오픈" class="nav-link" data-scroll-target="#oracle-compute-instance-포트-오픈">3. Oracle Compute Instance 포트 오픈</a></li>
  <li><a href="#oracle-compute-instance-ssh-포트-변경" id="toc-oracle-compute-instance-ssh-포트-변경" class="nav-link" data-scroll-target="#oracle-compute-instance-ssh-포트-변경">4. Oracle Compute Instance SSH 포트 변경</a></li>
  <li><a href="#vscode-cursor-등으로-원격-서버에-ssh로-접속하여-스크립트를-만든-후-스크립트-실행-시-권한-문제-발생" id="toc-vscode-cursor-등으로-원격-서버에-ssh로-접속하여-스크립트를-만든-후-스크립트-실행-시-권한-문제-발생" class="nav-link" data-scroll-target="#vscode-cursor-등으로-원격-서버에-ssh로-접속하여-스크립트를-만든-후-스크립트-실행-시-권한-문제-발생">5. vscode, cursor 등으로 원격 서버에 SSH로 접속하여 스크립트를 만든 후, 스크립트 실행 시 권한 문제 발생</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cloud Compute Instance 사용 시 알아두면 좋은 사용법들</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Cloud</div>
  </div>
  </div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>limyj0708 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 8, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="oracle-compute-instance에-고정-ip-할당하기" class="level1">
<h1>1. Oracle Compute Instance에 고정 IP 할당하기</h1>
<ul>
<li>2025-10-08 기준 내용</li>
</ul>
<ol type="1">
<li>Hamburger 메뉴 버튼 클릭</li>
<li>Networking</li>
<li>IP management</li>
<li>Reserved public IPs</li>
<li>Reserve public IP address 버튼 클릭</li>
<li>내용 작성하여 등록</li>
<li>고정 IP 할당 결과 <img src="1_oracle_public_ip.jpg" class="img-fluid" alt="고정 IP 할당 결과"></li>
</ol>
</section>
<section id="sshconfig에서-간단-접속-설정" class="level1">
<h1>2. ~.ssh/config에서 간단 접속 설정</h1>
<ol type="1">
<li>터미널에서 <code>nano ~/.ssh/config</code> 실행하여 config 편집</li>
</ol>
<pre><code>Host 사용할_호스트_이름
    # Public IP
    HostName 000.000.000.000
    Port 00000
    # 서버 유저
    User user_account_name
    # Private key 경로
    IdentityFile /Users/..../private.key

    # 연결 유지 (끊김 방지)
    ## 60초마다 null packet을 보내서 연결이 끊기지 않게 유지
    ServerAliveInterval 60
    ## ServerAliveInterval에 설정된 간격으로 신호를 보냈는데 서버로부터 응답이 없을 경우, 몇 번까지 더 시도할지를 결정
    ServerAliveCountMax 3

    # 연결 재사용 (속도 향상)
    ControlMaster auto
    ControlPath ~/.ssh/controlmasters/%r@%h:%p
    ControlPersist 10m

    # 접속 시도 타임아웃
    ConnectTimeout 10

    # 보안 관련 옵션
    ## X11 Forwarding(GUI 프로그램 실행) 기능을 비활성화. 서버에서 GUI 애플리케이션을 사용할 일이 없다면 꺼두는 것이 보안에 좋음
    ForwardX11 no
    ## 내 PC → Bastion 서버 (Public IP) → Private 서버 (Private IP) 이런 접속 구조가 필요할 때에는 SSH Agent Forwarding이 필요
    ## 하지만 저런 구조에서 사용할 일이 없으므로 끈다.
    ForwardAgent no</code></pre>
<ol start="2" type="1">
<li>각 항목에 대한 설명</li>
</ol>
<ul>
<li>연결 유지
<ul>
<li>ServerAliveInterval 60 : 60초마다 null packet을 보내서 연결이 끊기지 않게 유지</li>
<li>ServerAliveCountMax 3 : ServerAliveInterval에 설정된 간격으로 신호를 보냈는데 서버로부터 응답이 없을 경우, 몇 번까지 더 시도할지를 결정. 3번의 시도에도 서버가 응답하지 않으면, 클라이언트는 서버에 문제가 생겼거나 네트워크 연결이 끊어졌다고 판단하고 SSH 접속을 스스로 종료.</li>
</ul></li>
<li>연결 재사용 (속도 향상)
<ul>
<li>ControlMaster auto : 특정 호스트에 대한 첫 SSH 연결이 “마스터(Master)” 연결이 되어, 이후의 연결들이 이 마스터 연결을 공유하도록 허용
<ul>
<li>ssh를 실행하면, ControlMaster는 지정된 ControlPath에 연결을 제어하는 소켓(통신 통로) 파일이 있는지 확인. 파일이 없으면 새로 연결을 맺고 마스터가 되어 소켓을 생성. 파일이 있으면, 새로 인증 절차를 밟는 대신 기존 소켓을 통해 즉시 통신을 시작.</li>
</ul></li>
<li>ControlPath ~/.ssh/controlmasters/%r@%h:%p
<ul>
<li>ControlMaster가 생성하는 제어용 소켓 파일을 어디에 어떤 이름으로 만들지 지정</li>
<li>이 경우에는 아래와 같음
<ul>
<li>%r: 원격 서버의 사용자 이름 (remote username)</li>
<li>%h: 원격 서버의 호스트 이름 (remote hostname)</li>
<li>%p: 원격 서버의 포트 번호 (port)</li>
</ul></li>
</ul></li>
</ul></li>
<li>접속 시도 타임아웃
<ul>
<li>ConnectTimeout 10
<ul>
<li>10초 내에 TCP 연결이 수립되지 않으면 즉시 접속을 실패 처리하고 명령을 종료</li>
</ul></li>
</ul></li>
<li>보안 관련 옵션
<ul>
<li>ForwardX11 no
<ul>
<li>X11 Forwarding은 원격 서버에서 실행한 GUI(그래픽 인터페이스) 프로그램의 화면을 내 로컬 PC 모니터에 표시해주는 기능</li>
<li>X11 Forwarding을 활성화하면(ForwardX11 yes), SSH 연결을 통해 원격 서버와 내 PC 사이에 특수한 “그래픽용 통신 채널”이 열림. 만약 접속한 원격 서버가 해킹당했다면, 공격자는 이 채널을 악용할 수 있음</li>
</ul></li>
<li>ForwardAgent no
<ul>
<li>SSH Agent Forwarding은 내 로컬 PC의 SSH 개인 키를 다른 서버로 직접 복사하지 않고, 원격 서버가 내 키를 잠시 빌려서 또 다른 서버에 접속할 수 있게 해주는 기능</li>
<li>SSH Agent Forwarding은 주로 Bastion Host (또는 Jump Server) 환경에서 사용</li>
<li>Bastion Host는 내부망을 보호하기 위해 외부에서 내부 서버로 접근하기 위한 유일한 관문 역할을 하는 서버</li>
<li>내 PC → Bastion 서버 (Public IP) → Private 서버 (Private IP)
<ul>
<li>Agent Forwarding이 없다면
<ul>
<li>내 PC에서 Bastion 서버로 접속</li>
<li>Bastion 서버에서 Private 서버로 또 접속해야 하므로, Bastion 서버에 Private 서버 접속용 개인 키를 복사해둬야 함</li>
</ul></li>
<li>Agent Forwarding을 사용한다면
<ul>
<li>내 PC에서 Agent Forwarding 옵션을 켜고 Bastion 서버에 접속</li>
<li>Bastion 서버에서 Private 서버로 접속을 시도하면, 인증 요청이 내 PC의 SSH Agent로 전달</li>
<li>내 PC의 Agent가 인증을 대신 처리해 주므로, Private 서버로 바로 접속</li>
<li>Bastion 서버에는 어떠한 개인 키 파일도 남지 않아 훨씬 안전</li>
</ul></li>
<li>편리함에도 불구하고 ForwardAgent no를 권장하는 이유는, 중간 서버(Bastion)가 해킹당했을 때 심각한 보안 위협이 될 수 있기 때문</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="oracle-compute-instance-포트-오픈" class="level1">
<h1>3. Oracle Compute Instance 포트 오픈</h1>
<ol type="1">
<li>Networking</li>
<li>Subnet</li>
<li>Security</li>
</ol>
<ul>
<li>Security List에서 수정 원하는 항목 클릭 <img src="3_subnet_security.jpg" class="img-fluid" alt="Security"></li>
</ul>
<ol start="4" type="1">
<li>Security Rules</li>
</ol>
<ul>
<li>여기까지 왔으면 이제 Ingress Rule과 Egress Rule을 수정할 수 있다.</li>
</ul>
</section>
<section id="oracle-compute-instance-ssh-포트-변경" class="level1">
<h1>4. Oracle Compute Instance SSH 포트 변경</h1>
<ol type="1">
<li><code>3. Oracle Compute Instance 포트 오픈</code>을 참고하여 원하는 포트를 연다.</li>
<li>ssh 설정 수정 : <code>sudo vi /etc/ssh/sshd_config</code></li>
</ol>
<ul>
<li>포트 정보를 추가한다. 예를 들면 아래와 같다.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Port 22  (기존 줄을 주석 처리하지 말고 일단 유지)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Port</span> <span class="dt">00000</span> <span class="er">(새로운</span> <span class="er">줄</span> <span class="er">추가)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>ssh.socket 비활성화</li>
</ol>
<ul>
<li><p>ssh.socket이 포트를 22번만 리스닝 하게 고정시키므로, 비활성화한다.</p>
<ul>
<li>systemd가 포트 22 리스닝 → sshd_config 무시</li>
<li>cat /lib/systemd/system/ssh.socket</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Socket]</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="dt">ListenStream</span><span class="op">=</span><span class="dv">22</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Accept</span><span class="op">=</span><span class="dt">no</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>ssh.socket의 역할 : <code>시스템 부팅 → systemd가 포트만 리스닝 → 연결 요청 오면 → sshd 자동 시작</code></p>
<ul>
<li>systemd가 포트 22번만 리스닝 (하드코딩됨)</li>
<li>SSH 연결이 없으면 sshd는 실행되지 않음</li>
<li>연결 요청이 오면 그때 sshd를 시작</li>
<li>메모리 절약 및 on-demand 실행을 위한 최적화</li>
</ul></li>
<li><p>전통적인 방식 : <code>시스템 부팅 → sshd 데몬 시작 → 계속 실행 중 → 연결 대기</code></p>
<ul>
<li>SSH 데몬이 항상 메모리에 상주</li>
<li>/etc/ssh/sshd_config의 Port 설정을 사용</li>
</ul></li>
<li><p>ssh.socket을 왜 꺼도 되는가?</p>
<ul>
<li>SSH 서비스는 여전히 작동</li>
<li>서버에서 SSH는 자주 사용되므로 on-demand 실행의 이점이 적음</li>
<li>sshd 데몬의 메모리 사용량은 매우 적음 (몇 MB)</li>
</ul></li>
<li><p>/lib/systemd/system/ssh.socket의 ListenStream 값을 바꿔도 되긴 하는데..</p>
<ul>
<li>openssh-server 패키지가 업데이트되면 설정이 덮어씌워짐</li>
<li>override 메커니즘을 사용하면 되지만 관리가 복잡함</li>
</ul></li>
<li><p>이제 비활성화 하자</p>
<pre class="shell"><code># 1. SSH 소켓 비활성화 및 중지
sudo systemctl stop ssh.socket
sudo systemctl disable ssh.socket

# 2. SSH 서비스만 활성화 (소켓 없이)
sudo systemctl enable ssh.service
sudo systemctl restart ssh

# 3. 포트 확인
sudo ss -tlnp | grep ssh</code></pre></li>
</ul>
<ol start="4" type="1">
<li>iptables 규칙 추가
<ul>
<li><p>기본적으로 UFW가 없음. iptables로 관리</p></li>
<li><p>규칙 추가 예시</p>
<pre class="shell"><code>sudo iptables -I INPUT 5 -p tcp --dport 00000 -m state --state NEW -j ACCEPT</code></pre></li>
<li><p>규칙 확인</p>
<pre class="shell"><code>sudo iptables -L INPUT -n -v --line-numbers</code></pre></li>
<li><p>규칙 저장</p>
<pre class="shell"><code># iptables-persistent 설치 (없다면)
sudo apt-get update
sudo apt-get install iptables-persistent

# 규칙 저장. 재부팅 후에도 유지
sudo netfilter-persistent save </code></pre></li>
</ul></li>
<li>여기까지 진행했다면 이제 로컬 머신에서 SSH 접속 테스트를 하고, 성공적으로 접속되었다면 22번 포트는 막자.</li>
</ol>
</section>
<section id="vscode-cursor-등으로-원격-서버에-ssh로-접속하여-스크립트를-만든-후-스크립트-실행-시-권한-문제-발생" class="level1">
<h1>5. vscode, cursor 등으로 원격 서버에 SSH로 접속하여 스크립트를 만든 후, 스크립트 실행 시 권한 문제 발생</h1>
<ol type="1">
<li><code>-rw-rw-r--</code> 권한으로 스크립트가 생성되는데, 실행 권한이 없다. 보안 문제가 발생할 수 있어서 기본 설정이 이렇다.</li>
<li><code>chmod +x /스크립트/경로</code> 수행하면 해결</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="limyj0708/blog" data-repo-id="R_kgDOIJzVlQ" data-category="General" data-category-id="DIC_kwDOIJzVlc4Cck8R" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->




</body></html>